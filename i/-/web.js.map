{"version":3,"sources":["../../easing.ts","../../equal.ts","../../atom.ts","../../ctx.ts","../../elem.ts","../../me.ts","demo.view.tree.ts","../demo.view.ts","../dw.js"],"names":[],"mappings":"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AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"web.js","sourcesContent":["namespace $.$$ {\n// ============================================================================\n\n// https://gist.github.com/gre/1650294\n/*\n * Easing Functions - inspired from http://gizma.com/easing/\n * only considering the t value for the range [0, 1] => [0, 1]\n*/\nexport function $me_easing_value(initial: number, target: number, t: number, fn = $me_easing.linear) {\n  const result = initial + (target - initial) * fn(t)\n  // console.log({result, initial, target, t}, fn(t))\n  return result\n}\n\nexport type $me_easing_func = (t: number) => number\nexport const $me_easing = <{[key: string]: $me_easing_func}>{\n  // no easing, no acceleration\n  linear: function (t: number) { return t },\n  // accelerating from zero velocity\n  easeInQuad: function (t: number) { return t*t },\n  // decelerating to zero velocity\n  easeOutQuad: function (t: number) { return t*(2-t) },\n  // acceleration until halfway, then deceleration\n  easeInOutQuad: function (t: number) { return t<.5 ? 2*t*t : -1+(4-2*t)*t },\n  // accelerating from zero velocity\n  easeInCubic: function (t: number) { return t*t*t },\n  // decelerating to zero velocity\n  easeOutCubic: function (t: number) { return (--t)*t*t+1 },\n  // acceleration until halfway, then deceleration\n  easeInOutCubic: function (t: number) { return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 },\n  // accelerating from zero velocity\n  easeInQuart: function (t: number) { return t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuart: function (t: number) { return 1-(--t)*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuart: function (t: number) { return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t },\n  // accelerating from zero velocity\n  easeInQuint: function (t: number) { return t*t*t*t*t },\n  // decelerating to zero velocity\n  easeOutQuint: function (t: number) { return 1+(--t)*t*t*t*t },\n  // acceleration until halfway, then deceleration\n  easeInOutQuint: function (t: number) { return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t }\n}\n\n// ============================================================================\n}\n\n","namespace $.$$ {\n// ============================================================================\n\n// https://github.com/epoberezkin/fast-deep-$me_equal/blob/master/index.js\nvar isArray = Array.isArray;\nvar keyList = Object.keys;\nvar hasProp = Object.prototype.hasOwnProperty;\n\nexport type $me_equal_type<Value> = (a: Value, b: Value) => boolean\nexport function $me_equal(a: any, b: any) : boolean {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    var arrA = isArray(a)\n      , arrB = isArray(b)\n      , i\n      , length\n      , key;\n\n    if (arrA != arrB) return false\n    if (arrA && arrB) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!$me_equal(a[i], b[i])) {\n          const result = false\n          // console.log({result}, a[i], b[i])\n          return result\n        }\n      return true;\n    }\n\n    let setA = a instanceof Set\n    let setB = b instanceof Set\n    if (setA != setB) return false\n    if (setA && setB) {\n      if (a.size != b.size) return false\n      let iter = a.keys()\n      let next = iter.next()\n      while (!next.done) {\n        if (!b.has(next.value)) return false\n        next = iter.next()\n      }\n      iter = b.keys()\n      next = iter.next()\n      while (!next.done) {\n        if (!a.has(next.value)) return false\n        next = iter.next()\n      }\n      return true\n    }\n\n    let mapA = a instanceof Map\n    let mapB = b instanceof Map\n    if (mapA != mapB) return false\n    if (mapA && mapB) {\n      const result = $me_equal([...a], [...b])\n      // console.log(result, [...a], [...b])\n      return result\n    }\n\n    var dateA = a instanceof Date\n      , dateB = b instanceof Date;\n    if (dateA != dateB) return false;\n    if (dateA && dateB) return a.getTime() == b.getTime();\n\n    var regexpA = a instanceof RegExp\n      , regexpB = b instanceof RegExp;\n    if (regexpA != regexpB) return false;\n    if (regexpA && regexpB) return a.toString() == b.toString();\n\n    var keys = keyList(a);\n    length = keys.length;\n\n    if (length !== keyList(b).length)\n      return false;\n\n    for (i = length; i-- !== 0;)\n      if (!hasProp.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      key = keys[i];\n      if (!$me_equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  return a!==a && b!==b;\n}\n\n// ==========================================================================\n}\n","namespace $.$$ {\n// ============================================================================\n\nexport enum $me_atom_state { invalid, error, valid }\nexport enum $me_atom_type { lazy, force }\n\ntype $me_atom_def_value = (val?: any, prev?: any) => any\n\ntype $me_atom_mastered_def_value_read = (v: (name: string) => any) => any\ntype $me_atom_mastered_def_value_write = (val: any) => void\ninterface $me_atom_def {\n  masters?: string[],\n  r?: $me_atom_mastered_def_value_read,\n  w?: $me_atom_mastered_def_value_write,\n  d?: boolean,\n  t: $me_atom_type,\n}\n\nexport interface $me_atom_anim_intf {from?: any, to: any, delay?: number, duration?: number, easing?: $me_easing_func}\n\nexport class $me_atom_anim_class {\n  public _anim: {from?: any, to: any, delay: number, duration: number, easing: $me_easing_func}\n  constructor(anim: $me_atom_anim_intf ) {\n    this._anim = {\n      from: anim.from,\n      to: anim.to,\n      delay: anim.delay || 0,\n      duration: anim.duration || 200,\n      easing: anim.easing || $me_easing.easeInOutQuad,\n    }\n  }\n}\n\nexport function $me_atom_anim(anim: $me_atom_anim_intf ) {\n  return new $me_atom_anim_class (anim)\n}\n\nexport enum $me_atom_def_type {none, simple, mastered, shortcut}\nexport function $me_atoms() {\n\n  let _force_slaves_to_update = <{[name: string]: true}>{}\n  let _raf: number\n  function _update_force_slaves() {\n    _raf = void 0\n    let slaves = Object.keys(_force_slaves_to_update)\n    // if (slaves.length) console.log(slaves)\n    _force_slaves_to_update = {}\n    while (slaves.length) {\n      for (let i = 0, count = slaves.length; i < count; i++) {\n        const atom = (self as any).get(slaves[i])\n        atom.value()\n      }\n      slaves = Object.keys(_force_slaves_to_update)\n      // if (slaves.length) console.warn(slaves)\n      _force_slaves_to_update = {}\n    }\n  }\n  function update_force_slaves(slaves: string[]) {\n    for (let i = 0, count = slaves.length; i < count; i++) {\n      _force_slaves_to_update[slaves[i]] = true\n    }\n    // console.log(_force_slaves_to_update)\n    if (_raf === void 0) _raf = requestAnimationFrame(_update_force_slaves)\n  }\n\n  const _anim_to_play = {} as {\n    [anim_name: string]: {\n      from: any,\n      to: any,\n      value: any,\n      delay: number,\n      duration: number,\n      easing: $me_easing_func,\n      start?: number,\n    } }\n\n  function play_animation(name: string, anim: {from: any, to: any, delay: number, duration: number, easing: $me_easing_func}) {\n    if (_anim_to_play[name]) {\n      const _anim = _anim_to_play[name]\n      _anim.to = anim.to\n    } else {\n    // console.log({name}, anim)\n      _anim_to_play[name] = { ...anim, value: anim.from }\n      _play_animation()\n    }\n  }\n\n  let _play_animation_raf: number\n  function _play_animation() {\n    if (_play_animation_raf === void 0) _play_animation_raf = requestAnimationFrame((t: number) => {\n      _play_animation_raf = void 0\n      const anim_names = Object.keys(_anim_to_play)\n      let needReplay = false\n      for (let i = 0, count = anim_names.length; i < count; i++) {\n        const anim_name = anim_names[i]\n    // console.warn('there', anim_names )\n        if (_update_animation(anim_name, t)) {\n    // console.error('needReplay', anim_names )\n          needReplay = true\n        } else {\n    // console.log('no needReplay', anim_names )\n          delete _anim_to_play[anim_name]\n        }\n      }\n      if (needReplay) {\n        _update_force_slaves()\n        _play_animation()\n      }\n    })\n  }\n\n  function _update_animation(name: string, t: number) {\n    const anim = _anim_to_play[name]\n    // console.log(anim)\n    const result = !$me_equal(anim.value, anim.to)\n    if (result) {\n      if (anim.value == null || isNaN(anim.value)) {\n        console.error('anim \"' + name + '\" has value ' + anim.value)\n        // throw new Error('anim \"' + name + '\" has value ' + anim.value)\n      } else {\n        if (anim.start === void 0) anim.start = t\n          // console.log(anim.start)\n        var progress = Math.max(0, Math.min(1, ((t - anim.start) - anim.delay) / anim.duration))\n        anim.value = anim.from + (anim.to - anim.from) * anim.easing(progress);\n        try {\n          self(name)(anim.value)\n        } catch (e) {\n          console.error(e)\n        }\n      }\n    }\n    // console.log(anim)\n    // return false\n    return result\n  }\n\n  function _create_atom(\n    name: string, // for debug purpose only\n    atom_def: $me_atom_def\n  ) {\n    let _state = $me_atom_state.invalid\n    let _value: any\n    let _error: any\n    let _force_slaves: string[]\n    let _r = atom_def.r\n    let _w = atom_def.w\n    let _d = atom_def.d\n    let _t = atom_def.t\n    let _masters = !atom_def.masters || !atom_def.masters.length ? void 0 : atom_def.masters.slice()\n    if (_masters) {\n      for (let master of _masters) {\n        const master_atom = _store[master]\n        // if (master_atom && master_atom.is_read_defined()) {\n        if (master_atom) { // TODO: implement defense against  \n          master_atom.add_slave(name, _t)\n        } else {\n          const msg = 'atom \"' + master + '\" can not be used as master before read definition'\n          console.error(msg, _store)\n          console.trace()\n          throw new Error(msg)\n        }\n      }\n    }\n\n    function master_values() {\n      const result = <{[name: string]: any}>{}\n      if (_masters)\n        for (let i = 0, count = _masters.length; i < count; i++) {\n          const master_atom_name = _masters[i]\n          const atom = _store[master_atom_name]\n          const value = atom.value()\n          if (atom.state() != $me_atom_state.valid) return\n          result[master_atom_name] = value\n        }\n      return function (value_id: string | number) {\n        let value_name: string\n        if (typeof value_id === 'string') {\n          value_name = value_id\n        } else if (Number.isFinite(value_id)) {\n          const master_idx = value_id as number\n          if (_masters && 0 <= master_idx && master_idx < _masters.length) {\n            value_name = _masters[master_idx]\n          } else {\n            const msg = 'atom::' + name + ': value_id \"' + value_id + '\" is out of masters range'\n            console.error(msg, _masters)\n            console.trace()\n            throw new Error(msg)\n          }\n        } else {\n          // TODO:\n        }\n        const value = result[value_name]\n        if (value === void 0) {\n          const msg = 'atom::' + name + ': value \"' + value_name + '\" not found in master values'\n          console.error(msg)\n          console.trace()\n          throw new Error(msg)\n        }\n        return value\n      }\n    }\n\n    let _value_def_raf: any\n    let _value_def_invalid_atoms: string[]\n    let _invalid_masters: string[]\n    let _invalid_masters_raf: any\n    function read_val() {\n      let val: any\n      const v = master_values()\n      if (!v && _d) {\n        if (_invalid_masters_raf !== void 0) {\n          clearTimeout(_invalid_masters_raf)\n          _invalid_masters_raf = void 0\n        }\n        _invalid_masters = _masters.filter(master => _store[master].state() != $me_atom_state.valid)\n        _invalid_masters_raf = setTimeout(() => {\n          _invalid_masters_raf = void 0\n          console.warn(name, _invalid_masters, _masters.filter(master => _store[master].state() != $me_atom_state.valid))\n        }, 100)\n      }\n      if (v) {\n        if (_invalid_masters_raf !== void 0) {\n          clearTimeout(_invalid_masters_raf)\n          _invalid_masters_raf = void 0\n        }\n        if (_r) {\n          val = _r(v)\n        } else if (!_masters) {\n          val = void 0\n        } else if (_masters.length == 1) {\n          val = v(_masters[0])\n        } else {\n          val = _masters.map(master_atom => v(master_atom))\n        }\n      }\n      return val\n    }\n    function write_val(val: any) {\n      if (_w) {\n        let ret = _w(val)\n        if (ret !== void 0) val = ret\n      }\n      return val\n    }\n    function atom_def_write(w: $me_atom_mastered_def_value_write, t: $me_atom_type, d?: boolean) {\n      if (_w !== void 0) {\n        const msg = name + ': write method already defined '\n        console.error(msg)\n        console.trace()\n        throw new Error(msg)\n      }\n      _w = w\n      if (t == $me_atom_type.force && _t != t && _masters) for (let master of _masters) _store[master].add_slave(name, t)\n      _t = t\n      if (d !== void 0) _d = d\n    }\n    function atom_def_read(masters: string[], r: $me_atom_mastered_def_value_read, t: $me_atom_type, d?: boolean) {\n      if (_r !== void 0) {\n        const msg = name + ': read method already defined'\n        console.error(msg)\n        console.trace()\n        throw new Error(msg)\n      }\n      _masters = !masters || !masters.length ? void 0 : masters.slice()\n      _r = r\n      for (let master of _masters) _store[master].add_slave(name, t)\n      _t = t\n      if (d !== void 0) _d = d\n    }\n    function _invalidate_force_slaves() {\n      if (_masters) {\n        for (let i = 0, count = _masters.length; i < count; i++)\n          _store[_masters[i]].invalidate_force_slaves()\n      }\n    }\n    function atom_is_valid_value(val?: any) {\n      return !(val === void 0 || Number.isNaN(val))\n    }\n    function atom_update(val?: any) {\n      let result\n    // if (name == 'search_result_grid_left') console.log(_value_def)\n      try {\n        const prev_value = _state === $me_atom_state.valid ? _value : void 0\n        // let ret = value_def(val)\n        // let ret = _value_def(master_provider, val)\n        let ret: any\n        if (val === void 0) ret = read_val(); else ret = write_val(val)\n  // if (name == 'search_result_grid_left') console.log({ret, val})\n        if (val === void 0 && ret !== void 0 && !(ret instanceof $me_atom_anim_class)) {\n          val = ret\n          // const ret2 = value_def(val = ret)\n          // const ret2 = _value_def(master_provider, val = ret)\n          const ret2 = write_val(val = ret)\n          if (ret2 !== void 0) ret = ret2\n        }\n  // if (name == 'search_result_grid_left') console.log({ret})\n        if (!(ret instanceof $me_atom_anim_class)) {\n          result = _value = ret\n        } else {\n          const anim = ret._anim\n          if (anim.from != void 0) {\n            result = _value = anim.from\n          } else if (_value == void 0) {\n            anim.from = result = _value = anim.to\n          } else {\n            anim.from = result = _value\n          }\n          if (!$me_equal(anim.from, anim.to)) {\n            anim.from = _value\n            play_animation(name, anim as {from: any, to: any, delay: number, duration: number, easing: $me_easing_func})\n          } else if (prev_value != _value) {\n            // value_def(_value)\n            // _value_def(master_provider, _value)\n            write_val(_value) // TODO: use ret value\n          }\n        }\n      // if (name == 'app_padding') console.log({name, _value, prev_value})\n        if (_value !== prev_value) {\n          self.state(_value === void 0 || Number.isNaN(_value) ? $me_atom_state.invalid : $me_atom_state.valid)\n        }\n      } catch (err) {\n        console.error(err)\n        self.state($me_atom_state.error, result = err)\n      }\n      // if (name == 'app_padding') console.warn({name, result, val, _state})\n      return result\n    }\n    function atom_value(val?: any) : any {\n      // if (name == 'app_padding') console.error({'': 'in', name, val, _state})\n      let result\n      if (val !== void 0) {\n        if (val instanceof $me_atom_anim_class) throw new Error(\"TODO\")\n        if (!$me_equal(val, _value)) {\n          result = atom_update(val)\n        }\n      } else if (_state === $me_atom_state.valid) {\n        result = _value\n      } else if (_state === $me_atom_state.error) {\n        result = _error\n      } else if (_state === $me_atom_state.invalid) {\n        result = atom_update(val)\n        // if (name == 'viewport_height') console.log({'': 'after atom_update', name, val, _state, _value_def})\n      }\n      // if (name == 'viewport_height')\n      // if (name == 'app_padding') console.log({'': 'atom_value out', name, result, val, _state})\n      return result as any\n    }\n    atom_value.def_write = atom_def_write\n    atom_value.def_read = atom_def_read\n    atom_value.is_valid_value = atom_is_valid_value\n    atom_value.update = atom_update\n    atom_value.value = atom_value\n    atom_value.type = function atom_type() { return _t }\n    atom_value.state = function atom_state(val?: $me_atom_state, err?: any) {\n      if (val !== void 0 && (val !== _state || val === $me_atom_state.valid || val === $me_atom_state.error && err && err !== _error)) {\n        _state = val\n        if (_state === $me_atom_state.error) {\n          _error = err\n          _spread_state()\n        } else {\n          _error = void 0\n          _spread_state($me_atom_state.invalid)\n        }\n      }\n      return _state\n    }\n    atom_value.error = () => _error\n    atom_value._value = () => _value\n    atom_value.masters = () => _masters && _masters.slice()\n    atom_value.is_read_defined = () => _r !== void 0\n\n    // let _lazy_slaves = [] as string[]\n    // let _own_force_slaves = [] as string[]\n    let _lazy_slaves : Set<string>\n    let _own_force_slaves : Set<string>\n    atom_value.add_slave = (slave_name: string, t: $me_atom_type) => {\n      if (t == $me_atom_type.lazy) {\n        if (!_lazy_slaves || !_lazy_slaves.has(slave_name)) {\n          if (!_lazy_slaves) _lazy_slaves = new Set<string>()\n          _lazy_slaves.add(slave_name)\n        }\n      } else {\n        if (_lazy_slaves && _lazy_slaves.has(slave_name)) _lazy_slaves.delete(slave_name)\n        if (!_own_force_slaves || !_own_force_slaves.has(slave_name)) {\n          if (!_own_force_slaves) _own_force_slaves = new Set<string>()\n          _own_force_slaves.add(slave_name)\n          invalidate_force_slaves()\n        }\n      }\n    }\n    function _spread_state(state?: $me_atom_state, error?: any) {\n      if (state === void 0) state = _state\n      if (error === void 0) error = _error\n      // if (name == 'app_padding' && state === 0) console.log(_lazy_slaves, _own_force_slaves)\n      if (_lazy_slaves) for (let slave of _lazy_slaves) _store[slave].state(state, error)\n      if (_own_force_slaves) for (let slave of _own_force_slaves) _store[slave].state(state, error)\n      if (state === $me_atom_state.invalid) {\n        const slaves = force_slaves()\n        if (slaves.length) {\n          update_force_slaves(slaves)\n        }\n      }\n    }\n    function force_slaves() {\n      if (!_force_slaves) {\n        _force_slaves = _own_force_slaves ? [..._own_force_slaves.keys()] : []\n        if (_lazy_slaves) for (let slave of _lazy_slaves) _force_slaves.push(..._store[slave].force_slaves())\n      }\n      return _force_slaves\n    }\n    atom_value.force_slaves = force_slaves\n    function invalidate_force_slaves() {\n      _force_slaves = void 0\n      // console.log({name}, _force_slaves)\n      _invalidate_force_slaves()\n    }\n    atom_value.invalidate_force_slaves = invalidate_force_slaves\n    const self = atom_value\n    return self\n  }\n\n  let _store = <{ [name: string] : any }>{}\n  function get(name: string) {\n    if (_store[name]) return _store[name]\n    const msg = 'no atom \"' + name + '\"'\n    console.error(msg)\n    console.trace()\n    throw new Error(msg)\n  }\n  // function def(name: string,\n  //   masters?: string[],\n  //   v?: $me_atom_mastered_def_value_read | [\n  //     $me_atom_mastered_def_value_read,\n  //     $me_atom_mastered_def_value_write\n  //   ],\n  //   p?: { d?: boolean, t?: $me_atom_type}\n  // ) {\n\n  //   // const type = (p && p.t) !== void 0 ? p.t : $me_atom_type.lazy\n  //   // let atom_def: $me_atom_def_value | $me_atom_def\n  //   // if ()\n  //   let atom_def: $me_atom_def = {masters, d: p && p.d, t: $me_atom_type.lazy}\n  //   if (!Array.isArray(v)) {\n  //     if (v !== void 0) {\n  //       if (typeof v !== 'function') {\n  //         const msg = name + ': v expected to be Array or Function, not \"' + v + '\"'\n  //         console.error(msg)\n  //         console.trace()\n  //         throw new Error(msg)\n  //       }\n  //       atom_def.r = v as $me_atom_mastered_def_value_read\n  //     }\n  //     if ((p && p.t) === $me_atom_type.force) {\n  //       const msg = name + ': type can not be \"force\" for only read defined atom'\n  //       console.error(msg)\n  //       console.trace()\n  //       throw new Error(msg)\n  //     }\n  //   } else {\n  //     if (v.length < 1 || v.length > 2) {\n  //       const msg = name + ': v.length < 1 || v.length > 2'\n  //       console.error(msg)\n  //       console.trace()\n  //       throw new Error(msg)\n  //     }\n  //     atom_def.r = v[v.length - 2] as $me_atom_mastered_def_value_read\n  //     atom_def.w = v[v.length - 1] as $me_atom_mastered_def_value_write\n  //     let t = p && p.t\n  //     if (t === void 0) t = $me_atom_type.force\n  //     atom_def.t = t\n  //   }\n  //   let atom: any\n  //   if (_store[name]) {\n  //     const msg = 'atom \"' + name + '\" already exists'\n  //     console.error()\n  //     console.trace()\n  //     throw new Error(msg)\n  //   } else atom = _store[name] = _create_atom(name, atom_def)\n  //   if (atom.type() == $me_atom_type.force) atom.update()\n  // }\n  function def_read_write(name: string,\n    masters?: string[],\n    // rw: [$me_atom_mastered_def_value_read|$me_atom_mastered_def_value_write],\n    r?: $me_atom_mastered_def_value_read,\n    w?: $me_atom_mastered_def_value_write,\n    p?: { d?: boolean, t?: $me_atom_type}\n  ) {\n    if (r != null && typeof r !== 'function') {\n      // console.log(typeof r)\n      const msg = name + ': r expected to be a function, not ' + typeof r + `(${r})`\n      console.error(msg)\n      console.trace()\n      throw new Error(msg)\n    }\n    if (r === void 0) r = null\n    if (w != null && typeof w !== 'function') {\n      const msg = name + ': w expected to be a function, not ' + typeof w\n      console.error(msg)\n      console.trace()\n      throw new Error(msg)\n    }\n    if (w === void 0) w = null\n    let t = p && p.t\n    if (t === void 0) t = w ? $me_atom_type.force : $me_atom_type.lazy\n\n    const atom_def = {\n      masters,\n      r,\n      w,\n      t,\n      d: p && p.d,\n    }\n    // }\n    // let atom: any\n    if (_store[name]) {\n      const msg = 'atom \"' + name + '\" already exists'\n      console.error()\n      console.trace()\n      throw new Error(msg)\n    } else {\n      const atom = _store[name] = _create_atom(name, atom_def)\n      if (atom.type() == $me_atom_type.force) atom.update()\n    }\n  }\n  function def_write(name: string, w: $me_atom_mastered_def_value_write, p?: { d?: boolean, t?: $me_atom_type}) {\n    if (w !== void 0 && typeof w !== 'function') {\n      const msg = name + ': w expected to be a function, not ' + typeof w\n      console.error(msg)\n      console.trace()\n      throw new Error(msg)\n    }\n    let atom = _store[name]\n    if (atom) {\n      let t = p && p.t\n      if (t === void 0) t = $me_atom_type.force\n      atom.def_write(w, t, p && p.d)\n    } else {\n      let t = p && p.t\n      if (t === void 0) t = $me_atom_type.force\n      atom = _store[name] = _create_atom(name, {w, t, d: p && p.d})\n    }\n    if (atom.type() == $me_atom_type.force) atom.update()\n  }\n  function def_read(name: string, masters?: string[], r?: $me_atom_mastered_def_value_read, p?: { d?: boolean, t?: $me_atom_type}) {\n    if (r !== void 0 && typeof r !== 'function') {\n      const msg = name + ': r expected to be a function, not ' + typeof r\n      console.error(msg)\n      console.trace()\n      throw new Error(msg)\n    }\n    if (r === void 0) r = null\n    let atom = _store[name]\n    if (atom) {\n      let t = p && p.t\n      if (t === void 0) t = atom.type()\n      atom.def_read(masters, r, t, p && p.d)\n    } else {\n      let t = p && p.t\n      if (t === void 0) t = $me_atom_type.lazy\n      atom = _store[name] = _create_atom(name, {masters, r, t, d: p && p.d})\n    }\n    if (atom.type() == $me_atom_type.force) atom.update()\n  }\n  // function def(name: string,\n  //   p?: $me_atom_def_value | $me_atom_def,\n  //   type = $me_atom_type.lazy\n  // ) {\n  //   if (_store[name]) {\n  //     const msg = 'atom \"' + name + '\" already exists'\n  //     console.error()\n  //     console.trace()\n  //     throw new Error(msg)\n  //   }\n\n  //   const atom = _store[name] = _create_atom(self, name, p, type)\n  //   const masters = atom.masters()\n  //   if (masters) {\n  //     const count = masters.length\n  //     for (let i = 0; i < count; i++) {\n  //       const master_atom = _store[masters[i]]\n  //       if (master_atom) {\n  //         master_atom.add_slave(name)\n  //       } else {\n  //         const msg = 'atom \"' + masters[i] + '\" can not be used as master before definition'\n  //         console.error(msg)\n  //         console.trace()\n  //         throw new Error(msg)\n  //       }\n  //     }\n  //     if (atom.type() == $me_atom_type.force) atom.value()\n  //   }\n  // }\n  // function def_write_shortcut(name: string, w: (val: any) => any, type = $me_atom_type.lazy) {\n  //   const value = (val?: any) => {\n  //     if (val !== void 0) {\n  //       const ret = w(val)\n  //       if (ret !== void 0) val = ret\n  //     }\n  //     return val\n  //   }\n  //   return def(name, value, type)\n  // }\n  // function def_read_write_shortcut(name: string, r: () => any, w: (val: any) => any, type = $me_atom_type.lazy) {\n  //   const value = (val?: any) => {\n  //     if (val === void 0) {\n  //       val = r()\n  //     } else {\n  //       const ret = w(val)\n  //       if (ret !== void 0) val = ret\n  //     }\n  //     return val\n  //   }\n  //   return def(name, value, type)\n  // }\n  // function def_read_shortcut(name: string, r: () => any, type = $me_atom_type.lazy) {\n  //   const value = (val?: any) => {\n  //     if (val === void 0) val = r()\n  //     return val\n  //   }\n  //   return def(name, value, type)\n  // }\n  get.get = get\n  // get.def = def\n  // get.rw = def\n  get.rw = def_read_write\n  get.w = def_write\n  get.r = def_read\n  // get.rw = def_read_write_shortcut\n  // get.r = def_read_shortcut\n  const self = get\n  return self\n}\n\n// ==========================================================================\n\n// ==========================================================================\n}\n","namespace $.$$ {\n// ============================================================================\n\nexport const enum $me_ctx_halign { center, left, right }\n\nconst period = '...'\nexport function $me_ctx_text_render(ctx: any, text: string, ctx_x: number, ctx_w: number, ctx_padding: number, ctx_y: number, align = $me_ctx_halign.center) {\n  let w = ctx.measureText(text).width\n  const w_max = ctx_w - ctx_padding * 2\n  if (w <= w_max) {\n    if (align === $me_ctx_halign.center) {\n      ctx.fillText(text, ctx_x + (ctx_w - w) / 2, ctx_y)\n    } else if (align == $me_ctx_halign.left) {\n      ctx.fillText(text, ctx_x + ctx_padding, ctx_y)\n    } else {\n      throw new Error('TODO')\n    }\n  } else {\n    let len = text.length\n    const ctxPeriodWidth = ctx.measureText(period).width\n    while (len && (w = ctx.measureText(text.slice(0, len)).width) > w_max - ctxPeriodWidth) {\n      len--\n    }\n    if (len) {\n      text = text.slice(0, len)\n      ctx.fillText(text, ctx_x + ctx_padding, ctx_y)\n      ctx.fillText(period, ctx_x + ctx_padding + ctx.measureText(text).width, ctx_y)\n    } else {\n      console.error('TODO')\n      throw new Error('TODO') // use .rect(), clip(), was_clip\n    }\n  }\n}\n\n// ============================================================================\n}\n","namespace $.$$ {\n// ============================================================================\n// export interface StyleProps {[prop: string]: any}\n// export interface DomNode {[prop: string]: any}\n// export type ElemDomNode = () => HTMLElement\n// export type ElemUpdateDomStyle = (p: StyleProps) => void\n// export type ElemUpdateDomNode = (p: DomNode) => void\n// export type ElemAppendChild = (child: HTMLElement | $me_elem_intf) => void\nexport interface $me_elem_intf {\n  dom_node: () => HTMLElement,\n  dom_node_style: (p: {[prop: string]: any}) => void,\n  dom_node_props: (p: {[prop: string]: any}) => void,\n  dom_node_attrs: (p: {[prop: string]: any}) => void,\n  dom_node_append_child: (child: HTMLElement | $me_elem_intf) => void,\n  dom_node_insert_before: (child: HTMLElement | $me_elem_intf, ref: HTMLElement | $me_elem_intf) => void,\n}\n\nlet _pxStyleProps: {[prop: string]: boolean}\nfunction isPxStyleProp(prop: string) {\n  if (!_pxStyleProps) {\n    _pxStyleProps = {}\n    const pxStyleProps = ['width', 'height']\n    const sides = ['left', 'top', 'right', 'bottom']\n    pxStyleProps.push(...sides)\n    pxStyleProps.push('margin')\n    pxStyleProps.push('padding')\n    for (let i = 0, count = sides.length; i < count; i++) {\n      let side = sides[i]\n      side = side.charAt(0).toUpperCase() + side.slice(1)\n      pxStyleProps.push('margin' + side)\n      pxStyleProps.push('padding' + side)\n    }\n    for (let i = 0, count = pxStyleProps.length; i < count; i++) _pxStyleProps[pxStyleProps[i]] = true\n  }\n  return !!_pxStyleProps[prop]\n}\n\nexport interface $me_elem_params {\n  before?: HTMLElement | $me_elem_intf,\n  elem?: string | HTMLElement,\n  ns?: string,\n  cls?: string,\n  attrs?: {[prop: string]: any},\n  style?: {[prop: string]: any},\n  props?: {[prop: string]: any},\n  events?: {[prop: string]: EventListener},\n  events_async?: {[prop: string]: EventListener},\n  events_sync?: {[prop: string]: EventListener},\n  children?: $me_elem_params[],\n}\nexport function $me_elem(\n  parent: HTMLElement | $me_elem_intf,\n  p?: $me_elem_params\n) {\n  const dom_node = p && p.elem && typeof p.elem != 'string' ?\n    p.elem as HTMLElement :\n    (p && p.ns && p.elem ?\n      document.createElementNS(p.ns, p.elem as string) as HTMLElement :\n      document.createElement(p && p.elem as string || 'div')\n    )\n  const style = dom_node.style\n  function setStyleProp(prop: string, value: any) {\n    if (Number.isFinite(value)) {\n      if (prop == 'opacity') {\n        value += ''\n      } else if (isPxStyleProp(prop)) {\n        value += 'px'\n      }\n    } else if (typeof value == 'boolean') {\n      if (prop == 'visibility') value = value ? 'visible' : 'hidden'\n    }\n    if (typeof value != 'string') {\n      const msg = `prop: ${prop}, value: ${value}`\n      console.error(msg)\n      console.trace()\n      throw new Error(msg)\n    } else {\n      style[prop] = value\n    }\n  }\n\n  if (p.attrs) for (let attr in p.attrs) dom_node.setAttribute(attr, p.attrs[attr])\n  if (p.style) for (let prop in p.style) setStyleProp(prop, p.style[prop]) //style[prop] = p.style[prop]\n  if (p.props) for (let prop in p.props) dom_node[prop] = p.props[prop]\n  if (p.events) for (let event in p.events) dom_node.addEventListener(event, p.events[event], false)\n  if (p.events_async) for (let event in p.events_async) dom_node.addEventListener(event, p.events_async[event], {passive: true})\n  if (p.events_sync) for (let event in p.events_sync) dom_node.addEventListener(event, p.events_sync[event], {passive: false})\n\n  if (p && p.cls) dom_node.classList.add(p.cls)\n  if (parent) {\n    // console.log(p && p.before)\n    let beforeNode: HTMLElement\n    if (p && p.before) {\n      const before = p.before\n      beforeNode = !(before as $me_elem_intf).dom_node ? before as HTMLElement : (before as $me_elem_intf).dom_node()\n    }\n    if ((parent as $me_elem_intf).dom_node) {\n      if (!beforeNode) {\n        (parent as $me_elem_intf).dom_node_append_child(dom_node)\n      } else {\n        (parent as $me_elem_intf).dom_node_insert_before(dom_node, beforeNode)\n      }\n    } else {\n      if (!beforeNode) {\n        (parent as HTMLElement).appendChild(dom_node)\n      } else {\n        (parent as HTMLElement).insertBefore(dom_node, beforeNode)\n      }\n    }\n  }\n  let _raf : number\n  let _styleProps = {} as {[prop: string]: any}\n  let _nodeProps = {} as {[prop: string]: any}\n  let _nodeAttrs = {} as {[prop: string]: any}\n  function applyUpdates() {\n    if (_raf === void 0) _raf = requestAnimationFrame(function () {\n      _raf = void 0\n      for (let prop in _styleProps) {\n        setStyleProp(prop, _styleProps[prop])\n        // if (prop == 'width') console.warn(prop); else console.log(prop)\n        delete _styleProps[prop]\n      }\n      for (let prop in _nodeProps) {\n        dom_node[prop] = _nodeProps[prop]\n        delete _nodeProps[prop]\n      }\n      for (let attr in _nodeAttrs) {\n        dom_node.setAttribute(attr, _nodeAttrs[attr])\n        delete _nodeAttrs[attr]\n      }\n      // console.log(document.getElementById('search_params').getBoundingClientRect().bottom - document.getElementById('search_result').getBoundingClientRect().top)\n    })\n  }\n  const self = {\n    dom_node() {\n      return dom_node\n    },\n    dom_node_style(styleProps: {[prop: string]: any}, immediatly = false) {\n      if (immediatly) throw new Error('TODO')\n      for (let prop in styleProps) _styleProps[prop] = styleProps[prop]\n      applyUpdates()\n    },\n    dom_node_props(nodeProps: {[prop: string]: any}, immediatly = false) {\n      if (immediatly) {\n        for (let prop in nodeProps) dom_node[prop] = nodeProps[prop]\n      } else {\n        for (let prop in nodeProps) _nodeProps[prop] = nodeProps[prop]\n        applyUpdates()\n      }\n      // for (let prop in nodeProps) _nodeProps[prop] = nodeProps[prop]\n      // applyUpdates()\n    },\n    dom_node_attrs(nodeAttrs: {[prop: string]: any}, immediatly = false) {\n      if (immediatly) {\n        for (let attr in nodeAttrs) dom_node.setAttribute(attr, nodeAttrs[attr])\n      } else {\n        for (let attr in nodeAttrs) _nodeAttrs[attr] = nodeAttrs[attr]\n        applyUpdates()\n      }\n    },\n    dom_node_append_child(child: HTMLElement | $me_elem_intf) {\n      const child_node = (child as $me_elem_intf).dom_node ? (child as $me_elem_intf).dom_node() : child as HTMLElement\n      dom_node.appendChild(child_node)\n      return self\n    },\n    dom_node_insert_before(child: HTMLElement | $me_elem_intf, ref: HTMLElement | $me_elem_intf) {\n      const child_node = (child as $me_elem_intf).dom_node ? (child as $me_elem_intf).dom_node() : child as HTMLElement\n      const ref_node = (ref as $me_elem_intf).dom_node ? (ref as $me_elem_intf).dom_node() : ref as HTMLElement\n      dom_node.insertBefore(child_node, ref_node)\n      return self\n    }\n  }\n  if (p.children) for (let i in p.children ) $me_elem(self, p.children[i])\n  return self\n}\n\n// let bodyCursor: {origin: any, cursor: string}\n// let bodyCursorRaf: number\n// function setBodyCursor(p: {origin: any, cursor: string}) {\n//   if (\n//     (\n//       bodyCursor === void 0 ||\n//       p.cursor !== 'default' ||\n//       p.origin === bodyCursor.origin && p.cursor != bodyCursor.cursor ||\n//       false\n//     )\n//   ) {\n//     bodyCursor = p\n//     if (bodyCursorRaf === void 0) bodyCursorRaf = requestAnimationFrame(function() {\n//       if (document.body.style.cursor != p.cursor) document.body.style.cursor = p.cursor\n//       bodyCursorRaf = void 0\n//     })\n//   }\n// }\n\n// ============================================================================\n}\n","namespace $.$$ {\n// ==========================================================================\n\nexport function $me_word_plural(count : number, word1 : string, word2_4 : string, word5more? : string) {\n  if (word5more === undefined) { word5more = word2_4 }\n  let result = word5more\n  const decimal = Math.floor(count / 10) % 10\n  if (decimal != 1) {\n    const unit = count % 10\n    if (unit == 1) {\n      result = word1\n    } else if ( unit >= 2 && unit <= 4 ) {\n      result = word2_4\n    }\n  }\n  return result\n}\n\n// ==========================================================================\n}\n","","namespace $.$$ {\n// ============================================================================\n\n// export interface $me_panel_params extends $me_elem_params {\n//   margin: number,\n//   // onWindowResize?: EventListener,\n// }\n\n// export function $me_panel(parent: any, p?: $me_panel_params) {\n//   let styleAddon: any\n//   // console.log(document.body.parentElement.getBoundingClientRect().width)\n//   if (p && p.margin) {\n//     const margin = p.margin\n//     let panelWidth = document.body.parentElement.getBoundingClientRect().width - 2 * margin\n//     styleAddon = {\n//       position: 'absolute',\n//       left: margin ,\n//       top: ((p && p.style ? 0 : p.style.height) || 100) + 2 * margin,\n//       width: panelWidth,\n//     }\n//     window.addEventListener('resize', (event: Event) => {\n//       const panelWidthNew = document.body.parentElement.getBoundingClientRect().width - 2 * margin\n//       const scale = (panelWidthNew / panelWidth)\n//       const delta = panelWidth * (scale - 1) / 2\n//       const threshold = .5\n//       let tm: any\n//       function resetWidth() {\n//         tm = void 0\n//         result.dom_node_style({\n//           width: (panelWidth = panelWidth * scale),\n//           transform: '',\n//         })\n//       }\n//       if ((1 - threshold) <= scale && scale <= (1 + threshold)) {\n//         result.dom_node_style({\n//           transform:\n//             'translateX(' + delta + 'px) ' + // https://stackoverflow.com/questions/33729567/css3-float-position-after-scale-transform/33730034#33730034\n//             'scaleX(' + scale + ') ' +\n//           '',\n//         })\n//         if (tm === void 0) tm = setTimeout(resetWidth, 50)\n//       } else {\n//         if (tm !== void 0) { clearTimeout(tm); }\n//         resetWidth()\n//       }\n//     })\n//   }\n//   const result = { ...$me_elem(parent, {\n//     props: { ...(p && p.props) },\n//     children: [ ...(p && p.children)],\n//     attrs: { ...(p && p.attrs) },\n//     style: {\n//       ...(p && p.style),\n//       ...styleAddon,\n//     },\n//   })}\n//   return result\n// }\n\nconst mobile_viewport_width_max = 1024\nfunction viewport() {\n  // https://stackoverflow.com/questions/1248081/get-the-browser-viewport-dimensions-with-javascript\n  const result = {\n    width: Math.max(document.documentElement.clientWidth, window.innerWidth || 0),\n    height: Math.max(document.documentElement.clientHeight, window.innerHeight || 0),\n  }\n  return result\n}\n\nconst pixelRatio = window.devicePixelRatio\n\nexport function $me_demo_search_params(parent: any, _a: any, dataWorker: Worker, p?: any) {\n  const self =\n  // {...\n    $me_elem(parent,\n      {\n        props: { id: 'search_params'},\n        style: {\n          ...(p && p.style),\n          position: 'absolute',\n          background: 'white',\n        },\n      },\n    )\n  // }\n\n  let elem_canvas_render_raf: number\n  function elem_canvas_render() {\n    if (elem_canvas_render_raf === void 0) elem_canvas_render_raf = requestAnimationFrame(() => {\n      elem_canvas_render_raf = void 0\n      const ctxHeight = 44 * pixelRatio\n      const ctxItemMargin = 8 * pixelRatio\n      const ctxTextY = 36 * pixelRatio\n      const ctxFontSize = 14 * pixelRatio\n\n      let w = 0\n      elem_canvas_ctx.font = ctxFontSize + 'px system-ui'\n\n      for (let i = 0, count = modes.length; i < count; i++) {\n        const item = modes[i]\n        w += item.ctx.w = elem_canvas_ctx.measureText(item.title).width\n        w += 2 * ctxItemMargin\n      }\n\n      const clientRect = elem_canvas.dom_node().getBoundingClientRect()\n      modes[0].ctx.x = _a('search_params_canvas_width')() - w\n      for (let i = 0, count = modes.length; i < count; i++) {\n        const item = modes[i]\n        if (_a('search_params_mode')() == i) {\n          elem_canvas_ctx.fillStyle = '#0070a4'\n          elem_canvas_ctx.fillRect(item.ctx.x, 0, item.ctx.w + 2 * ctxItemMargin, ctxHeight)\n\n          const ctxTextX = item.ctx.x + ctxItemMargin\n          elem_canvas_ctx.fillStyle = 'white'\n          elem_canvas_ctx.fillText(item.title, ctxTextX, ctxTextY)\n          if (i < count - 1) {\n            modes[i + 1].ctx.x = ctxTextX + item.ctx.w + ctxItemMargin\n          }\n        } else {\n          const ctxTextX = item.ctx.x + ctxItemMargin\n          elem_canvas_ctx.fillStyle = '#0070a4'\n          elem_canvas_ctx.fillText(item.title, ctxTextX, ctxTextY)\n          if (i < count - 1) {\n            modes[i + 1].ctx.x = ctxTextX + item.ctx.w + ctxItemMargin\n          }\n        }\n        item.clientRect.left = clientRect.left + item.ctx.x / pixelRatio\n        item.clientRect.top = clientRect.top\n        item.clientRect.bottom = clientRect.top + ctxHeight / pixelRatio\n        item.clientRect.right = clientRect.left + (item.ctx.x + item.ctx.w + 2 * ctxItemMargin) / pixelRatio\n      }\n    })\n  }\n\n  const elem_canvas = $me_elem(self, {elem: 'canvas', style: {width: '100%', height: '100%'}})\n  const elem_canvas_ctx = (elem_canvas.dom_node() as any).getContext('2d')\n\n  const modes = [\n    {title: '', ctx: {w: 0, x: 0}, clientRect: {left: 0, top: 0, right: 0, bottom: 0}},\n    {title: '', ctx: {w: 0, x: 0}, clientRect: {left: 0, top: 0, right: 0, bottom: 0}},\n    {title: '', ctx: {w: 0, x: 0}, clientRect: {left: 0, top: 0, right: 0, bottom: 0}},\n  ]\n  const elem_body = $me_elem(null, {elem: document.body, events: {\n    mousemove: 'ontouchstart' in window ? void 0 : (event: MouseEvent) => {\n      let i_found: number\n      for (let i = 0, count = modes.length; i < count; i++) {\n        const item = modes[i]\n        if (\n          item.clientRect.left < event.clientX && event.clientX < item.clientRect.right &&\n          item.clientRect.top < event.clientY && event.clientY < item.clientRect.bottom &&\n          true\n        ) {\n          i_found = i\n          break\n        }\n      }\n      if (i_found === void 0) {\n        elem_body.dom_node_style({cursor: 'default'})\n      } else {\n        elem_body.dom_node_style({cursor: 'pointer'})\n      }\n    },\n    mousedown: 'ontouchstart' in window ? void 0 : (event: MouseEvent) => {\n      click_mode(event.clientX, event.clientY)\n    },\n    touchstart: !('ontouchstart' in window) ? void 0 : (event: TouchEvent) => {\n      click_mode(event.touches[0].clientX, event.touches[0].clientY)\n    },\n  }})\n  function click_mode(clientX: number, clientY: number): boolean {\n    let i_found: number\n    for (let i = 0, count = modes.length; i < count; i++) {\n      const item = modes[i]\n      if (\n        item.clientRect.left < clientX && clientX < item.clientRect.right &&\n        item.clientRect.top < clientY && clientY < item.clientRect.bottom &&\n        true\n      ) {\n        i_found = i\n        break\n      }\n    }\n    const result = i_found !== void 0\n    if (result) {\n      _a('search_params_mode')(i_found)\n    }\n    return result\n  }\n\n  setTimeout(() => {\n    const conditions = {\n      published_days_ago: { days: 7 },\n      realty_section: { code: [\"flat\"] },\n      deal_type: { code: [\"sale\"] },\n      area: { code:[\"msk\"] },\n      is_deal_actual: true,\n      use_strict_conditions: true,\n    }\n    dataWorker.postMessage({cmd: 'conditions', conditions})\n  }, 100) // TODO: avoid setTimeout\n\n  dataWorker.addEventListener('message',\n    (event: any) => {\n    const response = event.data\n    if (response.status === 'ok' && response.cmd === 'count' ) {\n      parent.dom_node().dispatchEvent(new CustomEvent('count', {detail: response.count}))\n    }\n  })\n\n\n  _a.rw('search_params_mode', [],\n    () => 2,\n    (val: number) => val % 3\n  )\n  _a.rw('search_params_top', ['app_padding'],\n    null,\n    (top: number) => self.dom_node_style({top})\n  )\n  _a.rw('search_params_left', ['app_padding'],\n    null,\n    (left: number) => self.dom_node_style({left})\n  )\n  _a.rw('search_params_width', ['viewport_width', 'app_padding'],\n    (v: any) => v(0) - v(1) * 2,\n    (width: number) => self.dom_node_style({width}),\n  )\n  _a.rw('search_params_height', ['search_params_mode'],\n    (v: any) => $me_atom_anim({ to: [300, 200, 100][v(0)] }),\n    (height: number) => self.dom_node_style({height})\n  )\n  _a.rw('search_params_canvas_width', ['search_params_width'],\n    (v: any) => v(0) * pixelRatio,\n    (width: number) => elem_canvas.dom_node_props({width})\n  )\n  _a.rw('search_params_canvas_height', ['search_params_height'],\n    (v: any) => v(0) * pixelRatio,\n    (height: number) => elem_canvas.dom_node_props({height})\n  )\n\n  _a.rw('elem_canvas_renderer', ['search_params_canvas_width', 'search_params_canvas_height'],\n    null,\n    (val: number) => elem_canvas_render(),\n  )\n\n  return self\n}\n\nexport function $me_demo_search_result(parent: any, _a: any, dataWorker: Worker, p?: any) {\n  const self =\n  // {...\n    $me_elem(parent,\n      {\n        props: { id: 'search_result'},\n        style: {\n          ...(p && p.style),\n          position: 'absolute',\n          background: 'white'  ,\n        },\n      },\n    )\n  // }\n\n  const elem_header = $me_elem(self, {\n    elem: 'canvas',\n    props: { id: 'search_result_header'},\n    style: {\n      position: 'absolute',\n      top: 0,\n    },\n  })\n  const modes = [\n    {title: 'T', ctx: {w: 0, x: 0}, clientRect: {left: 0, top: 0, right: 0, bottom: 0}},\n    {title: '', ctx: {w: 0, x: 0}, clientRect: {left: 0, top: 0, right: 0, bottom: 0}},\n  ]\n\n  let search_result_header_canvas_render_raf: number\n  function search_result_header_canvas_render() {\n    if (search_result_header_canvas_render_raf === void 0) search_result_header_canvas_render_raf = requestAnimationFrame(() => {\n      search_result_header_canvas_render_raf = void 0\n    })\n  }\n\n  const grid = $me_demo_search_result_grid(self, _a , dataWorker, { row_height_min: 28, columns: [\n    {id: 'blank', title: '', width: 120 },\n    {id: 'photo', title: '', width: 36 },\n    {id: 'room_qt', title: '', width: 36 },\n    {id: 'metro', title: '/', width: 120, align: $me_ctx_halign.left },\n    {id: 'address', title: '', width: 200, align: $me_ctx_halign.left  },\n  ]})\n\n  _a.rw('search_result_top', ['search_params_height', 'app_padding'],\n    (v: any) => v(0) + v(1) + 16,\n    (top: number) => self.dom_node_style({top})\n  )\n  _a.rw('search_result_left', ['app_padding'],\n    null, (left: number) => self.dom_node_style({left})\n  )\n  _a.rw('search_result_width', ['viewport_width', 'app_padding'],\n    (v: any) => v(0) - v(1) * 2,\n    (width: number) => self.dom_node_style({width})\n  )\n  _a.rw('search_result_height', ['viewport_height', 'search_params_height', 'app_padding'],\n    (v: any) => v(0) - v(1) - 2 * v(2) - 16,\n    (height: number) => self.dom_node_style({height})\n  )\n\n  _a.r('search_result_padding', ['viewport_width'],\n    (v: any) => v(0) <= mobile_viewport_width_max ? 0 : 16\n  )\n  _a.rw('search_result_header_left', ['search_result_padding'],\n    null,\n    (left: number) => elem_header.dom_node_style({left})\n  )\n  _a.rw('search_result_header_width', ['search_result_width', 'search_result_padding'],\n    (v: any) => v(0) - 2 * v(1),\n    (width: number) => elem_header.dom_node_style({width})\n  )\n  _a.rw('search_result_header_height', [],\n    () => 40,\n    (height: number) => elem_header.dom_node_style({height}),\n  )\n  _a.r('search_result_header_margin_bottom', [],\n    () => 16\n  )\n  _a.rw('search_result_header_canvas_width', ['search_result_header_width'],\n    (v: any) => v(0) * pixelRatio,\n    (width: number) => elem_header.dom_node_props({width})\n  )\n  _a.rw('search_result_header_canvas_height', ['search_result_header_height'],\n    (v: any) => v(0) * pixelRatio,\n    (height: number) => elem_header.dom_node_props({height})\n  )\n  _a.rw('search_result_header_canvas_renderer', ['search_result_header_canvas_width', 'search_result_header_canvas_height'],\n    null,\n    (val: number) => search_result_header_canvas_render()\n  )\n  _a.r('search_result_grid_width', ['search_result_width', 'search_result_padding'],\n    (v: any) => v(0) - 2 * v(1)\n  )\n  _a.rw('_search_result_grid_top', ['search_result_header_height', 'search_result_header_margin_bottom'],\n    (v: any) => v(0) + v(1),\n    (top: number) => grid.props({top})\n  )\n  _a.r('search_result_grid_left', ['search_result_padding'],\n    (v: any) => v(0)\n  )\n  _a.r('search_result_grid_height', ['search_result_height', '_search_result_grid_top'],\n    (v: any) => v(0) - v(1)\n  )\n\n  return self\n}\n\nexport function $me_demo_search_result_grid(parent: any, _a: any, dataWorker: Worker, p: {[name: string]: any}) {\n  let lastDelta : number\n  let scrollAccu = 0\n  let wheel_raf: number\n  const isPassive = false // false means wheel in events_sync\n\n  dataWorker.addEventListener('message', (event: any) => {\n    const response = event.data\n    if (response.status === 'ok' && response.cmd === 'conditions') {\n      _a('search_result_grid_conditions')(response.conditions)\n    } else if (response.status === 'ok' && response.cmd === 'count') {\n      _a('search_result_grid_count')(response.count)\n    } else if (response.status === 'ok' && response.cmd === 'cell_texts') {\n      _a('search_result_grid_count')(response.count)\n      let idx_min: number, idx_max: number\n      for (let i = _row_i_min; i != _row_i_max; i = (i + 1) % _rows.length) {\n        const item = _rows[i]\n        if (idx_min === void 0) idx_min = item.idx\n        if (idx_max === void 0 || idx_max < item.idx)  idx_max = item.idx\n      }\n      for (let entry of response.cell_texts) {\n        const idx = entry[0]\n        entry[1].set('idx', entry[0])\n        _cell_texts.set(entry[0], entry[1])\n        if (idx_min <= idx && idx <= idx_max) {\n          const i = _row_idx_to_i.get(idx)\n          row_render(i)\n        }\n      }\n    } else {\n      console.error(response)\n    }\n  })\n  let clientY: number\n  let lastClientY: number\n  let accel: number\n  let prev_time: number\n  let curr_time: number\n  let inert_raf: number\n  let inert_delay: number\n  let prev_t: number\n  let accel_k: number\n  const self = {\n    ...$me_elem(parent,\n      {\n        props: { id: 'search_result_grid'},\n        style: {\n          position: 'absolute',\n          overflow: 'hidden',\n        },\n        events: {\n          touchstart: !('ontouchstart' in window) ? void 0 : (event: TouchEvent) => {\n            clientY = event.touches[0].clientY\n            lastDelta = 0\n            prev_time = void 0\n            if (inert_raf !== void 0) {\n              cancelAnimationFrame(inert_raf)\n              inert_raf = void 0\n            }\n          },\n          touchmove: !('ontouchstart' in window) ? void 0 : (event: TouchEvent) => {\n            const deltaY = clientY - event.touches[0].clientY\n            if (!deltaY) return\n            if (Math.sign(lastDelta) != Math.sign(deltaY)) {\n              scrollAccu = deltaY\n              prev_time = performance.now()\n            } else {\n              if (prev_time === void 0) prev_time = performance.now()\n              scrollAccu += deltaY\n            }\n            lastClientY = event.touches[0].clientY\n            lastDelta = deltaY\n            if (scrollAccu < 0 || scrollAccu > 0) {\n              if (!isPassive) event.preventDefault()\n              if (wheel_raf === void 0) wheel_raf = requestAnimationFrame((t) => {\n                wheel_raf = void 0\n                if (scroll_y(scrollAccu)) {\n                  if (prev_time !== void 0) {\n                    prev_t = t\n                    const curr_time = performance.now()\n                    accel = scrollAccu / (curr_time - prev_time)\n                    prev_time = curr_time\n                  }\n                  scrollAccu = 0\n                  clientY = lastClientY\n                }\n              })\n            } else {\n              accel = 0\n            }\n          },\n          touchend: !('ontouchstart' in window) ? void 0 : (event: TouchEvent) => {\n            prev_time = void 0\n            // accel_k = 0.99\n            accel_k = 0.95\n            function touch_inert(accel: number) {\n              if (Math.abs(accel) >= 1/17) {\n                inert_raf = requestAnimationFrame((t) => {\n                  inert_raf = void 0\n                  const scrollAccu = accel * (t - prev_t)\n                  if (Math.abs(scrollAccu) > 1 && scroll_y(Math.round(scrollAccu))) {\n                    const accel_new = accel * accel_k\n                    // accel_k = accel_k * 0.998\n                    accel_k = accel_k * 0.9999\n                    prev_t = t\n                    touch_inert(accel_new)\n                  }\n                })\n              }\n            }\n            if (Math.abs(accel) >= 1) touch_inert(accel)\n          },\n        },\n        events_sync: {\n          wheel: 'ontouchstart' in window ? void 0 : (event: MouseWheelEvent) => { // TODO: adopt to touch events\n            const deltaY = event.deltaY\n            if (!deltaY) return\n            if (Math.sign(lastDelta) != Math.sign(deltaY)) {\n              scrollAccu = deltaY\n            } else {\n              scrollAccu += deltaY\n            }\n            lastDelta = deltaY\n            if (scrollAccu < 0 || scrollAccu > 0) {\n              if (!isPassive) event.preventDefault()\n              if (wheel_raf === void 0) wheel_raf = requestAnimationFrame(() => {\n                wheel_raf = void 0\n                if (scroll_y(scrollAccu)) scrollAccu = 0\n              })\n            }\n          },\n        },\n      },\n    ),\n    props: (p: {[name: string]: any}) => {\n      // console.log(p)\n      for (let prop in p) {\n        _a('search_result_grid_' + prop)(p[prop])\n      }\n    },\n  }\n  const elem_header = $me_elem(self, {\n    elem: 'canvas', style: {position: 'absolute', top: 0, left: 0},\n  })\n  const header_ctx = (elem_header.dom_node() as any).getContext('2d')\n\n  _a.w('search_result_grid_width',\n    (width: number) => self.dom_node_style({width})\n  )\n  _a.w('search_result_grid_height',\n    (height: number) => self.dom_node_style({height}), { t: $me_atom_type.force }\n  )\n  _a.w('search_result_grid_top',\n    (top: number) => self.dom_node_style({top})\n  )\n  _a.w('search_result_grid_left',\n    (left: number) => self.dom_node_style({left})\n  )\n\n  let _row_i_min: number, _row_i_max: number\n  _a.r('search_result_grid_columns')\n  _a.r('search_result_grid_provider')\n  _a.w('search_result_grid_count',\n    (grid_count: number) => {\n      if (!_rows.length) throw new Error('TODO')\n      setTimeout(() => adjust_rows()) // TODO: avoid setTimeout\n    }\n  )\n  _a.w('search_result_grid_conditions',\n    (grid_conditions: any) => {\n      _row_i_min = void 0\n      _row_i_max = void 0\n      dataWorker.postMessage({cmd: 'idx_min_max'})\n      const grid_height = _a('search_result_grid_height')()\n      const row_height_min = _a('search_result_grid_row_height_min')()\n    }\n  )\n\n\n  _a.r('search_result_grid_columns_ctx', ['search_result_grid_columns'],\n    (v: any) => {\n      const columns = v(0)\n      let _columns = []\n      let cols = []\n      for (let i = 0, count = columns.length; i < count; i++) {\n        const col = columns[i]\n        _columns.push({\n          ...col,\n          ctx: { w: 0, x: 0 },\n          clientRect: {left: 0, top: 0, right: 0, bottom: 0},\n        })\n        cols.push(col.id)\n      }\n      dataWorker.postMessage({cmd: 'cols', cols})\n      return _columns\n    }\n  )\n\n  _a.r('search_result_grid_row_height_min')\n  _a.rw('search_result_grid_header_height', ['search_result_grid_row_height_min'],\n    null,\n    (height: number) => elem_header.dom_node_style({height}),\n  )\n\n  let _visible_row_count: number // TODO: avoid using let _visible_row_count\n  let _rows : { row: any, canvas: any, ctx: any, idx: number, top: number, height: number, need_render: boolean }[] = []\n  _a.rw('search_result_grid_visible_row_count', ['search_result_grid_height', 'search_result_grid_row_height_min'],\n    (v: any) => {\n      const visible_row_count = Math.max(0, Math.ceil(v(0) / v(1)) + 1) // WARN: must not be Math.max(0, Math.ceil(v(0) / v(1))) for _row_i_max never should be equal to _row_i_min\n      // console.log({visible_row_count})\n      if (_visible_row_count === void 0 || _visible_row_count < visible_row_count) return visible_row_count\n      return _visible_row_count\n    },\n    (visible_row_count: number) => {\n      const delta = _visible_row_count === void 0 ? visible_row_count : visible_row_count - _visible_row_count\n      if (delta) {\n        _visible_row_count = visible_row_count\n        const ctxSize = _a('search_result_grid_header_canvas_ctx_size')()\n        for (let i = 0; i < delta; i++) {\n          let item =  {} as { row: any, canvas: any, ctx: any, idx: number, top: number, height: number, need_render: boolean}\n          item.row = $me_elem(self, { before: elem_header, style: {\n            width: '100%',\n            height: _a('search_result_grid_row_height_min')(),\n            position: 'absolute',\n            top: 0,\n            left: 0,\n          }})\n          item.canvas = $me_elem(item.row, { elem: 'canvas', style: {\n            width: '100%',\n            height: _a('search_result_grid_row_height_min')(),\n            position: 'absolute',\n            top: 0,\n            left: 0,\n          }, props: {...ctxSize}})\n          // if (ctxSize) _rows[i].canvas.dom_node_props(ctxSize)\n          item.ctx = (item.canvas.dom_node() as any).getContext('2d')\n          _rows.push(item)\n        }\n        // console.log(_rows)\n        dataWorker.postMessage({cmd: 'page', page: _rows.length})\n      }\n    }\n  )\n\n  _a.rw('search_result_grid_header_width', ['search_result_grid_width'],\n    null,\n    (width: number) => elem_header.dom_node_style({width})\n  )\n\n  _a.rw('search_result_grid_header_canvas_ctx_size', ['search_result_grid_width', 'search_result_grid_row_height_min'],\n    (v: any) => ({ width: v(0) * pixelRatio, height: v(1) * pixelRatio }),\n    (val: {width: number, height: number}) => elem_header.dom_node_props(val)\n  )\n\n  _a.rw('search_result_grid_header_renderer', ['search_result_grid_columns_ctx', 'search_result_grid_header_canvas_ctx_size'],\n    null,\n    () => {\n      search_result_grid_header_render()\n      let idx_min: number, idx_max: number\n      for (let i = _row_i_min; i != _row_i_max; i = (i + 1) % _rows.length) row_render(i)\n    }\n  )\n\n  let search_result_grid_header_render_raf: number\n  const ctxLineWidth = 1 * pixelRatio\n  const ctxFontSize = 14 * pixelRatio\n  const ctxTextMarginHor = 4 * pixelRatio\n  const ctxTextMarginVert = 8 * pixelRatio\n  const fontFamily = 'system-ui'\n  const lineColor = '#adb0b8'\n  const textColor = '#313745'\n  const headerBackground = '#D8DCE3'\n  const cellBackground = '#f5f8f8'\n  function search_result_grid_header_render() {\n    if (search_result_grid_header_render_raf === void 0) search_result_grid_header_render_raf = requestAnimationFrame(() => {\n      search_result_grid_header_render_raf = void 0\n\n      const ctx = header_ctx\n\n      const ctx_size = _a('search_result_grid_header_canvas_ctx_size')()\n      ctx.globalAlpha = 1\n      ctx.fillStyle = headerBackground\n      ctx.fillRect(0, 0, ctx_size.width, ctx_size.height)\n\n      ctx.beginPath()\n      ctx.strokeStyle = lineColor\n      ctx.lineWidth = ctxLineWidth\n      const _columns = _a('search_result_grid_columns_ctx')()\n      {\n        const y = ctx_size.height - ctxLineWidth\n        ctx.moveTo(0, y)\n        ctx.lineTo(ctx_size.width, y)\n      }\n      const clientRect = elem_header.dom_node().getBoundingClientRect()\n      for (let i = 0, count = _columns.length; i < count; i++) {\n        const col = _columns[i]\n        col.ctx.x = !i ? 0 : _columns[i-1].ctx.x + _columns[i-1].ctx.w\n        col.ctx.w = col.width * pixelRatio\n        const x = col.ctx.x + col.ctx.w\n        ctx.moveTo(x, 0)\n        ctx.lineTo(x, ctx_size.height)\n        col.clientRect.left = clientRect.left + col.ctx.x / pixelRatio\n        col.clientRect.right = col.clientRect.left + col.ctx.w / pixelRatio\n        col.clientRect.top = clientRect.top\n        col.clientRect.bottom = clientRect.top + ctx_size.height\n      }\n      ctx.closePath()\n      ctx.stroke()\n      ctx.font = ctxFontSize + 'px ' + fontFamily\n      ctx.fillStyle = textColor\n      for (let i = 0, count = _columns.length; i < count; i++) {\n        const col = _columns[i]\n        const text = col.title\n        $me_ctx_text_render(ctx, text, col.ctx.x, col.ctx.w, ctxTextMarginHor, ctx_size.height - ctxTextMarginVert - ctxLineWidth)\n      }\n    })\n  }\n\n\n  let row_render_raf: number\n  let _row_render_i : Set<number>\n  function row_render(row_i: number) {\n    if (_row_render_i === void 0) _row_render_i = new Set<number>()\n    _row_render_i.add(row_i)\n    if (row_render_raf === void 0) row_render_raf = requestAnimationFrame(() => {\n      row_render_raf = void 0\n      const ctx_size = _a('search_result_grid_header_canvas_ctx_size')()\n      for (let row_i of _row_render_i) {\n        const start = performance.now()\n\n        _rows[row_i].canvas.dom_node().width = ctx_size.width\n        _rows[row_i].canvas.dom_node().height = ctx_size.height\n\n        const ctx = _rows[row_i].ctx\n\n\n        ctx.fillStyle = cellBackground\n        ctx.fillRect(0, 0, ctx_size.width, ctx_size.height)\n        ctx.strokeStyle = lineColor\n        ctx.lineWidth = ctxLineWidth\n\n        const _columns = _a('search_result_grid_columns_ctx')()\n          {\n            const y = Math.round(ctx_size.height - ctxLineWidth)\n            ctx.moveTo(0, y)\n            ctx.lineTo(ctx_size.width, y)\n          }\n          for (let i = 0, count = _columns.length; i < count; i++) {\n            const col = _columns[i]\n            col.ctx.x = Math.round(!i ? 0 : _columns[i-1].ctx.x + _columns[i-1].ctx.w)\n            col.ctx.w = Math.round(col.width * pixelRatio)\n            const x = col.ctx.x + col.ctx.w\n            ctx.moveTo(x, 0)\n            ctx.lineTo(x, ctx_size.height)\n          }\n          ctx.closePath()\n          ctx.stroke()\n\n          ctx.font = ctxFontSize + 'px ' + fontFamily\n          ctx.fillStyle = textColor\n          let was_clip = false\n          for (let i = 0, count = _columns.length; i < count; i++) do_render_cell(row_i, i)\n\n          const duration = performance.now() - start\n          if (duration >= 7) console.warn({row_render: duration, row_i, row_idx: _rows[row_i].idx})\n      }\n      _row_render_i = void 0\n    })\n\n  }\n\n  function do_render_cell(row_i: number, i: number) {\n    const ctx = _rows[row_i].ctx\n    const ctx_size = _a('search_result_grid_header_canvas_ctx_size')()\n    const _columns = _a('search_result_grid_columns_ctx')()\n\n    const col = _columns[i]\n    const text = cell_text(_rows[row_i].idx, i)\n    $me_ctx_text_render(ctx, text, col.ctx.x, col.ctx.w, ctxTextMarginHor, ctx_size.height - ctxTextMarginVert - ctxLineWidth, col.align)\n  }\n\n  const _cell_texts = new Map<number, Map<number, string>>()\n  function cell_text(idx: number, col_i: number) {\n    if (idx === void 0) { console.error(_rows.length); throw new Error('here') }\n    const _columns = _a('search_result_grid_columns_ctx')()\n    const col = _columns[col_i].id\n    let result = ''\n    if (_cell_texts.has(idx)) {\n      const row = _cell_texts.get(idx)\n      if (row.has(col)) result = row.get(col)\n    }\n    return result\n  }\n\n  function adjust_rows(val?: number, fromBottom = false) {\n    const start = performance.now()\n    const grid_count = _a('search_result_grid_count')()\n\n    if (grid_count === void 0 || grid_count == 0) return\n\n    let idx: number\n    let _row_i_min_new: number, _row_i_max_new: number\n    const grid_height = _a('search_result_grid_height')()\n    const row_height_min = _a('search_result_grid_row_height_min')()\n    if (!fromBottom) {\n      if (_row_i_max === void 0 || _rows[(_row_i_max + _rows.length - 1) % _rows.length].idx < grid_count - 1) {\n        let bottom_prev = val\n        if (bottom_prev === void 0) {\n          bottom_prev  = _row_i_min === void 0 ? row_height_min : _rows[_row_i_min].top\n        }\n        if (_row_i_min === void 0) _row_i_min = 0\n        idx = _rows[_row_i_min].idx || 0\n        for (let i = _row_i_min; idx < grid_count; i = (i + 1) % _rows.length) {\n          const item = _rows[i]\n          const top = item.top = bottom_prev\n          if (item.height === void 0) item.height = row_height_min\n          bottom_prev = top + item.height\n          if (item.idx === void 0 || idx != item.idx) {\n            item.idx = idx\n            item.need_render = true\n          }\n          idx++\n          if (top + item.height <= row_height_min) { continue }\n          if (_row_i_min_new === void 0) { _row_i_min_new = i }\n          _row_i_max_new = (i + 1) % _rows.length\n          if (bottom_prev >= grid_height) break\n        }\n      }\n    } else if (_rows[_row_i_min].idx > 0) {\n      let top_next = val\n      const last_visible_row_i = (_row_i_max + _rows.length - 1) % _rows.length\n      idx = _rows[last_visible_row_i].idx\n      for (let i = last_visible_row_i; idx >= 0; i = (i + _rows.length - 1) % _rows.length) {\n        const item = _rows[i]\n        if (item.height === void 0) item.height = row_height_min\n        const top = item.top = top_next - item.height\n        if (Number.isNaN(item.top)) { console.log(); throw new Error('here') }\n        top_next = top\n        if (item.idx === void 0 || idx != item.idx) {\n          item.idx = idx\n          item.need_render = true\n        }\n        idx--\n        if (top >= grid_height) { continue }\n        if (_row_i_max_new === void 0) { _row_i_max_new = (i + 1) % _rows.length }\n        _row_i_min_new = i\n        if (top_next <= row_height_min) break\n      }\n    }\n\n    if (_row_i_min_new === void 0 || _row_i_max_new === void 0) return\n\n    _row_i_min = _row_i_min_new\n    _row_i_max = _row_i_max_new\n    const duration  = performance.now() - start\n    if (duration > 10) console.warn({adjust_rows: duration})\n    if (idx <= 0) {\n      adjust_rows(row_height_min)\n    } else if (idx >= grid_count) {\n      adjust_rows(grid_height, true)\n    } else {\n      after_adjust_rows()\n    }\n  }\n\n  let _row_idx_to_i : Map<number, number>\n  function after_adjust_rows() {\n    const start = performance.now()\n    let render_time = 0\n    let render_count = 0\n    let idx_min: number, idx_max: number\n    const row_idx_to_i = new Map<number, number>()\n    for (let i = _row_i_min; i != _row_i_max; i = (i + 1) % _rows.length) {\n      const item = _rows[i]\n      row_idx_to_i.set(item.idx, i)\n      if (idx_min === void 0) idx_min = item.idx\n       if (idx_max === void 0 || idx_max < item.idx)  idx_max = item.idx\n      if (item.need_render) {\n        const render_start = performance.now()\n        row_render(i)\n        render_time += performance.now() - render_start\n        item.need_render = false\n        render_count++\n      }\n      _rows[i].row.dom_node_style({visibility: 'visible', top: _rows[i].top})\n    }\n    _row_idx_to_i = row_idx_to_i\n\n    if (idx_min === void 0 || idx_max === void 0) console.error({_row_i_min, _row_i_max}, [..._rows])\n    dataWorker.postMessage({cmd: 'idx_min_max', idx_min, idx_max})\n    // console.log({idx_min, idx_max} )\n\n    const data_idx_min = Math.max(0, idx_min - _rows.length)\n    const data_idx_max = Math.min(_a('search_result_grid_count')() - 1, data_idx_min + 3 * _rows.length)\n  //   // console.log({data_idx_min, data_idx_max} )\n\n    const idx_set = new Set<number>()\n    for (let i = data_idx_min; i <= data_idx_max; i++) {\n      if (!_cell_texts.has(i)) idx_set.add(i)\n    } // TODO: clean out data\n    let deleted_entries = 0\n    for (let entry of _cell_texts) {\n      const idx = entry[0]\n      if (idx < data_idx_min || idx > data_idx_max) {\n        deleted_entries++\n        _cell_texts.delete(idx)\n      }\n    }\n    if (deleted_entries) console.log({deleted_entries})\n\n    if (idx_set.size)  {\n      dataWorker.postMessage({cmd: 'idx_set', idx_set})\n    }\n    for (let i = _row_i_max; i != _row_i_min; i = (i + 1) % _rows.length) {\n      _rows[i].row.dom_node_style({visibility: 'hidden'})\n    }\n    const duration = performance.now() - start\n    if (duration > 10)\n      console.warn({after_adjust_rows: duration , render_time, render_count})\n    // return render_count\n  }\n  function scroll_y(val: number) {\n    // if (_row_i_min === void 0 || !val) return\n    if (_row_i_min === void 0 || _row_i_max === void 0) { // TODO: avoid this check\n      console.error({_row_i_min, _row_i_max})\n      return false\n    }\n    if (val > 0) {\n      if (_rows[_row_i_min] === void 0) {\n        console.error({_row_i_min, val}, [..._rows])\n      }\n      let bottom_prev = _rows[_row_i_min].top - val\n      adjust_rows(bottom_prev)\n    } else {\n      const last_visible_row_i = (_row_i_max + _rows.length - 1) % _rows.length\n      const last_visible_row = _rows[last_visible_row_i ]\n      if (last_visible_row === void 0) {\n        console.error({last_visible_row_i, _row_i_max}, [..._rows])\n      }\n      let top_next = last_visible_row.top + last_visible_row.height - val\n      adjust_rows(top_next, true)\n    }\n    return true\n  }\n\n  if (p) self.props(p)\n\n  return self\n}\n\n\nexport function $me_demo_app(root: any) {\n\n  const margin = 16\n  const self = $me_elem(null, {\n    elem: root,\n    style: {\n      background: '#EEE',\n      position: 'relative',\n      margin: 0,\n\n      // https://codepen.io/viljamis/pen/WQyPxV\n      // fontFamily: !(navigator.userAgent.match(/(ipad|iphone|ipod)/i) && !(window as any).MSStream) ? 'sans-serif' : '\"-apple-system\", \"HelveticaNeue\", sans-serif',\n      // font: 'caption',\n      fontFamily: 'system-ui',\n      fontWeight: '400',\n      fontSize: '100%',\n    },\n    // events: {\n    //   count: (event: CustomEvent) => {\n    //     // parent.dom_node().dispatchEvent(new CustomEvent('count', {detail: 10000}))\n    //     // console.log(event.detail)\n    //     _search_result.dom_node().dispatchEvent(new CustomEvent('count', {detail: event.detail}))\n    //      // _a('search_result_grid_count')(event.detail)\n    //     // console.log(event.detail)\n    //   },\n    // },\n  })\n\n  const _a = $me_atoms()\n\n  // _a.rw('viewport_width')\n  // _a.rw('viewport_height')\n\n  const _viewport = viewport()\n  _a.r('viewport_width', [], () => _viewport.width)\n  _a.r('viewport_height', [], () => _viewport.height)\n\n  _a.r('app_padding', ['viewport_width'], (v: any) => {\n    const result = v(0) <= mobile_viewport_width_max ? 0 : 16\n    // console.log(result)\n    return result\n  })\n\n  let dataWorker: Worker\n  try {\n    dataWorker = new Worker('dw.js')\n    // parent.dom_node_style({background: 'green'})\n  } catch (e) {\n    // console.error(e)\n    self.dom_node_style({background: 'red'})\n  }\n\n  const _search_params = $me_demo_search_params(self, _a, dataWorker)\n  const _search_result = $me_demo_search_result(self, _a, dataWorker)\n\n  const _search_params_height = 400\n\n  window.addEventListener( 'resize' , function() {\n    const _viewport = viewport()\n    _a('viewport_width')(_viewport.width)\n    _a('viewport_height')(_viewport.height)\n  })\n\n  // const _viewport = viewport()\n  // _a('viewport_width')(_viewport.width)\n  // _a('viewport_height')(_viewport.height)\n  // _a('search_params_height')(100)\n  // _a('app_padding')(16)\n\n  // try {\n  //   window as any).dataWorker = new Worker('dw.js')\n  // } catch (e) {\n  //   console.log(e)\n  //   self.dom_node_style({background: 'red'})\n  // }\n  // setTimeout(() => {\n  //   grid.dom_node().dispatchEvent(new CustomEvent('count', {detail: 10000}))\n  // }, 100) // TODO: adopt to null\n  return self\n}\n\n// ==========================================================================\n}\n",null]}